package {	    import flash.display.Shape;    import flash.display.Sprite;    import flash.media.Sound;    import flash.media.SoundChannel;    import flash.media.SoundMixer;    import flash.media.SoundTransform;    import flash.utils.*;    import flash.events.*;    import flash.geom.*;    import flash.filters.*;    import flash.errors.IOError;    public class swVisualizer extends Sprite {        private var _barArray: Array;        private var _lineArray: Array;        private var _numBars: int;		private var _ba: ByteArray;        public function swVisualizer() {			_barArray = new Array();            _lineArray = new Array();            _ba = new ByteArray();            _numBars = 45;           	createSpectrumBars();            addEventListener(Event.ENTER_FRAME, animateBars);        }        function createSpectrumBars(): void {            for (var i: int = 0; i < _numBars; i++) {                var bar: Shape = new Shape();                bar.graphics.beginFill(0xFF0099);                bar.graphics.drawRect(0, 0, 2, 400);                bar.graphics.endFill();                bar.y = 0;                bar.x = i*4;                addChild(bar);                _barArray.push(bar);                var line1: Shape = new Shape();                line1.graphics.beginFill(0x66FFFF);                line1.graphics.drawRect(0, 0, 2, 200);                line1.graphics.endFill();                line1.y = 0;                line1.x = i*4;                addChild(line1);                _lineArray.push(line1);            }        }		        function animateBars(event: Event): void {            try {				SoundMixer.computeSpectrum(_ba, true, 0);				for (var i: int = 0; i < _numBars; i++) {					_barArray[i].scaleY = Math.abs(_ba.readFloat());					_lineArray[i].scaleY = Math.abs(_ba.readFloat());				}			} catch (e) {				for (var n: int = 0; n < _numBars; n++) {					if (swGlobal.vars.playing) {						_barArray[n].scaleY = Math.random();						_lineArray[n].scaleY = Math.random();					} else {						_barArray[n].scaleY = 0;						_lineArray[n].scaleY = 0;					}				}			}        }    }}